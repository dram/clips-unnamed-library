(deffunction get-process-arguments ()
  (bind ?result (create$))
  (bind ?id (gensym*))
  (open "/proc/self/cmdline" ?id)
  (bind ?argument "")
  (while (<> (bind ?c (get-char ?id)) -1)
    (if (= ?c 0)
     then (bind ?result ?result ?argument)
          (bind ?argument "")
     else (bind ?argument (format nil "%s%c" ?argument ?c))))
  (close ?id)
  ?result)
